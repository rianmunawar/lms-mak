<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\123\105\x50\x41\124\x48") or exit("\x4e\157\x20\144\x69\x72\145\x63\164\x20\163\x63\162\151\x70\x74\x20\x61\x63\x63\145\163\163\x20\141\154\x6c\157\167\145\144"); class Update extends CI_Controller { function __construct() { goto cn50e; d802S: $this->load->database(); goto uvkm8; uvkm8: $this->load->library("\x65\156\x63\x72\x79\160\x74\151\x6f\156"); goto Uvq0g; CeJUr: $this->load->dbforge(); goto d802S; JESdV: include APPPATH . "\x63\157\x6e\146\151\x67\57\x64\141\x74\x61\142\141\163\x65\56\x70\x68\160"; goto CeJUr; cn50e: parent::__construct(); goto JESdV; Uvq0g: } public function output_json($data, $encode = true) { goto Go6IB; yUKaJ: $data = json_encode($data); goto kfYkX; F3hMC: $this->output->set_content_type("\141\160\160\154\151\143\x61\164\151\157\x6e\x2f\152\163\x6f\156")->set_output($data); goto CVMfN; Go6IB: if (!$encode) { goto MX_cI; } goto yUKaJ; kfYkX: MX_cI: goto F3hMC; CVMfN: } public function index() { goto PkJfw; KwZPY: $json = json_decode($json); goto K7LjS; PCTMg: $this->load->view("\x69\156\163\x74\141\x6c\154\57\150\145\141\144\x65\x72", $data); goto d5PBK; d5PBK: $this->load->view("\x69\x6e\x73\164\x61\x6c\154\57\x75\160\x64\x61\164\x65"); goto dDaWr; PkJfw: $json = file_get_contents("\56\x2f\141\163\163\145\164\x73\x2f\x61\x70\160\x2f\144\142\57\x64\141\x74\x61\142\141\163\145\56\152\x73\157\x6e"); goto KwZPY; ehAmX: $data["\x6a\x73\157\x6e"] = $json; goto PCTMg; K7LjS: $json = (array) $json; goto ehAmX; dDaWr: $this->load->view("\x69\x6e\163\x74\x61\154\154\x2f\146\x6f\x6f\164\145\x72"); goto RID33; RID33: } function object_to_array($data) { goto VV_vV; Vfbdz: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; eq7Cu: } goto IJhrN; xu6ql: return $data; goto arIBn; VV_vV: if (!(is_array($data) || is_object($data))) { goto KOUzt; } goto M5A3z; M5A3z: $result = []; goto Vfbdz; IJhrN: OMr3J: goto TxvgT; TxvgT: return $result; goto a563Y; a563Y: KOUzt: goto xu6ql; arIBn: } public function checkDatabase() { goto h0oi3; CC0Sv: $fields = []; goto cO0No; HsQiW: sort($full_tables); goto lcwW3; tCxIK: foreach ($full_tables as $table) { goto kL1h0; nORu2: goto TkoFf; goto TLaFc; TLaFc: RYIPE: goto jCH86; aF0ll: foreach ($json[$table] as $jtbl) { goto E1ZYt; JwAzP: rptuU: goto kRevH; kRevH: foreach ($fields[$table] as $ftbl) { goto LIb7C; JW_yd: $edit_columns[$table][] = $jtbl; goto uLmxx; u8sn1: HyuNY: goto m0AF5; uLmxx: ZNoH1: goto u8sn1; LIb7C: if (!($jtbl->name == $ftbl->name)) { goto HyuNY; } goto fTXNU; m0AF5: p2ywM: goto rxVEF; fTXNU: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto ZNoH1; } goto JW_yd; rxVEF: } goto YWNM7; O4txm: VRYtz: goto kBwzF; HvR0r: goto VRYtz; goto JwAzP; Ocz1d: $add_columns[$table][] = $jtbl; goto HvR0r; YWNM7: xb1iM: goto O4txm; kBwzF: B2uyT: goto RKRw_; E1ZYt: if ($this->db->field_exists($jtbl->name, $table)) { goto rptuU; } goto Ocz1d; RKRw_: } goto teGT3; b6X9B: WlJxd: goto kzDM7; pH2ug: TkoFf: goto b6X9B; zvJSQ: $create_tables[$table] = $json[$table]; goto nORu2; kL1h0: if ($this->db->table_exists($table)) { goto RYIPE; } goto zvJSQ; teGT3: zfk3d: goto Ng0Dd; jCH86: if (!isset($json[$table])) { goto Krr5K; } goto aF0ll; Ng0Dd: Krr5K: goto pH2ug; kzDM7: } goto XQP7n; vnhTJ: YaiLD: goto sPQzd; h0oi3: $db_debug = $this->db->db_debug; goto IUbAr; NYBjs: $this->output_json($data); goto ZKEl6; m6ov5: $data = ["\144\142" => $fields, "\143\x72\145\141\164\x65" => $create_tables, "\x6d\157\144\151\x66\171" => $edit_columns, "\x61\144\x64" => $add_columns, "\x63\157\x75\156\164\x73" => $counts, "\x6a\163\157\156" => $json, "\143\x75\x72\x72\145\156\164" => $currentDb]; goto NYBjs; i5E7P: $tbl_ada = array_keys($fields); goto JLzah; XQP7n: AHQrV: goto lz0t_; cO0No: $currentDb = []; goto lBGnH; lcwW3: $create_tables = []; goto hNkzB; sPQzd: $json = file_get_contents("\x2e\57\x61\163\163\x65\164\x73\57\x61\x70\x70\57\144\x62\x2f\x64\x61\x74\x61\x62\x61\x73\x65\x2e\152\163\x6f\156"); goto KEG0l; cAEu8: $tabless = $this->db->list_tables(); goto CC0Sv; dY2Mp: $tbl_baru = array_keys($json); goto i5E7P; hNkzB: $add_columns = []; goto BvG5a; KEG0l: $json = json_decode($json); goto FEIhX; BvG5a: $edit_columns = []; goto tCxIK; lz0t_: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto m6ov5; JLzah: $full_tables = array_merge($tbl_baru, $tbl_ada); goto I8Fts; FEIhX: $json = (array) $json; goto dY2Mp; lBGnH: foreach ($tabless as $table) { goto i7Vum; GarRQ: $i = 0; goto EP5Hz; p94DA: $retval = array(); goto GarRQ; cGv76: $query = $query->result_object(); goto p94DA; lu2vS: if (!($i < $c)) { goto wJdg6; } goto tUcRV; hgiiq: $retval[$i] = new stdClass(); goto I8oit; PTqng: if (!(($query = $this->db->query($sql)) === FALSE)) { goto r7TlJ; } goto T7pXg; pCZUr: wJdg6: goto LjxB7; C4o3l: SEZPe: goto kKbPe; kKbPe: tsytS: goto qg9fk; PjXVp: LHXMv: goto UG8RN; I8oit: $retval[$i]->name = $query[$i]->column_name; goto j1qmh; bdAIF: $i++; goto ZlK2j; v6ZA2: vTYv_: goto lu2vS; T7pXg: $currentDb = FALSE; goto moezd; LjxB7: $currentDb[$table] = $retval; goto ljNKo; MiGfm: if ($query[$i]->extra == "\x61\165\x74\x6f\x5f\151\156\143\x72\145\x6d\145\x6e\x74") { goto Q9BJn; } goto Pcp0B; tUcRV: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto PArSj; } goto z_KcG; qtH8I: goto SEZPe; goto O3T4v; qg9fk: PArSj: goto hgiiq; ZlK2j: goto vTYv_; goto pCZUr; O3T4v: Q9BJn: goto l6q2j; i7Vum: $datafld = $this->db->field_data($table); goto OXAiQ; ZEqJP: xPtsq: goto bdAIF; Pcp0B: $datafld[$i]->extra = $query[$i]->extra; goto qtH8I; OXAiQ: $sql = "\x53\105\x4c\105\103\x54\40\x60\x63\x6f\154\x75\x6d\156\137\x6e\141\155\145\140\x2c\x20\x60\156\165\x6d\x65\x72\x69\x63\x5f\160\162\x65\x63\x69\x73\x69\157\x6e\140\x2c\40\140\145\x78\164\x72\141\x60\54\x20\x60\151\163\137\x6e\x75\x6c\x6c\141\x62\154\145\140" . "\x20\x46\122\x4f\115\40\x60\151\156\x66\x6f\162\155\x61\164\151\x6f\x6e\137\x73\143\150\145\155\x61\x60\x2e\140\x63\x6f\x6c\165\155\156\x73\x60\40\x57\x48\x45\x52\105\40\x74\141\x62\x6c\x65\137\x73\x63\150\145\155\141\40\x3d\x20\x22" . $this->db->database . "\42\x20\x41\x4e\x44\40\164\141\x62\x6c\x65\x5f\156\x61\x6d\145\40\75\x20\42" . $table . "\x22"; goto PTqng; z_KcG: if (!($query[$i]->extra != '')) { goto tsytS; } goto MiGfm; ljNKo: $fields[$table] = $datafld; goto PjXVp; l6q2j: $datafld[$i]->auto_increment = true; goto C4o3l; moezd: r7TlJ: goto cGv76; j1qmh: $retval[$i]->extra = $query[$i]->extra; goto ZEqJP; EP5Hz: $c = count($query); goto v6ZA2; UG8RN: } goto vnhTJ; IUbAr: $this->db->db_debug = FALSE; goto cAEu8; I8Fts: $full_tables = array_unique($full_tables); goto HsQiW; ZKEl6: } public function updateDatabase() { goto ra7Hy; qkl9K: Nx8CU: goto aKPBn; jSwLL: $json = (array) $json; goto ce9vl; aKPBn: $json = file_get_contents("\56\x2f\141\163\x73\145\x74\163\x2f\x61\160\160\57\144\142\57\x64\141\164\x61\x62\141\x73\x65\56\152\x73\x6f\156"); goto UjkhW; h3d2V: $full_tables = array_unique($full_tables); goto uIqQ7; ra7Hy: $tabless = $this->db->list_tables(); goto g_fVK; g_fVK: $fields = []; goto yX0JB; FFHFP: $tbl_ada = array_keys($fields); goto a2tv8; UjkhW: $json = json_decode($json); goto jSwLL; fFg25: foreach ($full_tables as $table) { goto yR8vJ; q_NSt: BLLQZ: goto NcuEi; nESv4: Upfiv: goto sFBcw; fU9nj: MkEno: goto SSqNX; gNorS: JJMr3: goto fU9nj; jb5qm: Iu7pD: goto gNorS; sFBcw: $this->dbforge->create_table($table, TRUE); goto gpL8u; gpL8u: $this->db->query("\101\114\x54\105\x52\x20\124\101\102\x4c\105\x20\40\x60" . $table . "\140\x20\105\116\x47\x49\116\x45\x20\x3d\x20\x49\x6e\x6e\x6f\x44\102"); goto sEJ3s; gB25l: foreach ($json[$table] as $tbl => $jtbl) { goto LL_lr; isirl: LcieA: goto dVma_; k_ggY: $this->dbforge->add_key($jtbl->name, true); goto rl6Vr; rl6Vr: kRV06: goto isirl; xs7yj: if (!($jtbl->primary_key == 1)) { goto kRV06; } goto k_ggY; LL_lr: $field = [$jtbl->name => ["\164\x79\160\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\x72\141\x69\156\x74" => $jtbl->max_length, "\156\165\154\x6c" => $jtbl->primary_key == 0]]; goto Y1mSW; Y1mSW: $this->dbforge->add_field($field); goto xs7yj; dVma_: } goto nESv4; DabKi: if (!isset($json[$table])) { goto F09_w; } goto gB25l; sEJ3s: F09_w: goto IsWA2; eIvJ3: b82Ix: goto jb5qm; zrqPl: foreach ($json[$table] as $jtbl) { goto ASjW1; ASjW1: if ($this->db->field_exists($jtbl->name, $table)) { goto whh5U; } goto oln2v; FQu3J: goto mHntD; goto fHonZ; lYVsh: mHntD: goto pUsY_; J_iNU: cc_w6: goto q5_ij; oln2v: if ($jtbl->primary_key == 0) { goto kwswp; } goto n0Uv8; VsxJe: $this->dbforge->add_column($table, $field); goto lYVsh; q5_ij: u2zsz: goto s6OiS; n0Uv8: $field = array($jtbl->name => array("\x74\171\x70\145" => $jtbl->type, "\143\x6f\156\x73\x74\162\141\151\x6e\164" => $jtbl->max_length, "\x6e\165\154\154" => false)); goto Xy_03; pUsY_: goto cc_w6; goto ZAv5k; oYeT2: $field = array($jtbl->name => array("\164\171\160\x65" => $jtbl->type, "\143\x6f\156\x73\164\x72\x61\151\x6e\x74" => $jtbl->max_length, "\x64\145\x66\141\x75\154\164" => $jtbl->default)); goto VsxJe; qv4bV: $this->dbforge->add_column($table, $field); goto FQu3J; Xy_03: $this->dbforge->add_key($jtbl->name, true); goto qv4bV; VaNCU: j5yWF: goto J_iNU; ZAv5k: whh5U: goto UkJBS; fHonZ: kwswp: goto oYeT2; UkJBS: foreach ($fields[$table] as $ftbl) { goto hc9wk; jQe3Q: jhHtu: goto gc3J_; NZNVI: gufY7: goto PopVD; l5WRD: $field = array($jtbl->name . "\40\x64\141\164\x65\164\x69\155\x65\x20\x64\x65\x66\x61\165\x6c\x74\40\143\x75\162\x72\x65\156\x74\137\164\151\155\x65\163\164\x61\x6d\160" . $onUpdate); goto jQe3Q; ezuXw: if ($jtbl->primary_key == 0) { goto TFcEk; } goto Zldza; ttEX2: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto l5WRD; PBNzk: NKszp: goto jqMnw; uk16h: goto jhHtu; goto lZig0; GOkOq: goto mXmCz; goto bKijW; gc3J_: $this->dbforge->modify_column($table, $field); goto NZNVI; n0cBY: TFcEk: goto BEeBG; Iset0: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\x63\157\x6e\163\x74\x72\141\x69\x6e\164" => $jtbl->max_length, "\156\165\x6c\x6c" => false)); goto GOkOq; Zldza: if ($jtbl->auto_increment == true) { goto uZYFI; } goto Iset0; lZig0: s8b9h: goto ttEX2; q4T8F: $field = array($jtbl->name => array("\x74\171\x70\145" => $jtbl->type, "\x63\157\156\163\x74\x72\141\151\x6e\164" => $jtbl->max_length, "\156\165\x6c\x6c" => false, "\x61\165\x74\157\x5f\x69\x6e\143\162\x65\x6d\145\156\164" => true)); goto hzqG0; H1q2U: $field = array($jtbl->name => array("\164\171\x70\x65" => $jtbl->type, "\x63\157\156\x73\x74\x72\x61\151\156\x74" => $jtbl->max_length, "\x64\x65\x66\x61\165\x6c\164" => $jtbl->default)); goto uk16h; jqMnw: qV_0K: goto uL3cG; QsQvm: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto EJooN; } goto ezuXw; hzqG0: mXmCz: goto BDJ_u; hc9wk: if (!($jtbl->name == $ftbl->name)) { goto NKszp; } goto QsQvm; BDJ_u: $this->dbforge->add_key($jtbl->name, true); goto qredt; PopVD: EJooN: goto PBNzk; jhjCR: goto gufY7; goto n0cBY; bKijW: uZYFI: goto q4T8F; BEeBG: if ($jtbl->default == "\103\125\x52\x52\105\116\x54\x5f\124\111\x4d\105\x53\124\101\115\x50") { goto s8b9h; } goto H1q2U; qredt: $this->dbforge->modify_column($table, $field); goto jhjCR; uL3cG: } goto VaNCU; s6OiS: } goto eIvJ3; IsWA2: goto JJMr3; goto q_NSt; NcuEi: if (!isset($json[$table])) { goto Iu7pD; } goto zrqPl; yR8vJ: if ($this->db->table_exists($table)) { goto BLLQZ; } goto DabKi; SSqNX: } goto zMD42; ce9vl: $tbl_baru = array_keys($json); goto FFHFP; yX0JB: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); MSSpU: } goto qkl9K; uIqQ7: sort($full_tables); goto fFg25; zMD42: Z3_JK: goto J3naN; J3naN: echo true; goto qVGeh; a2tv8: $full_tables = array_merge($tbl_baru, $tbl_ada); goto h3d2V; qVGeh: } public function checkDb() { goto CA7MG; AyrWs: $create_tables = []; goto QmG4J; ov3mr: $json = (array) $json; goto y0yJX; DdwkH: sort($full_tables); goto AyrWs; vL3Vp: $this->output_json($data); goto FnyAl; W1D71: foreach ($tabless as $table) { goto KQaqy; lp0pW: $retval[$i]->name = $query[$i]->column_name; goto Up1F3; JpQhC: $i = 0; goto Sje5b; rFVxH: xElDg: goto mMFbi; tzMrM: $retval[$i]->default = $query[$i]->column_default; goto bWH0c; GfqbA: if (!($i < $c)) { goto vdxnw; } goto NDLWM; NDLWM: $retval[$i] = new stdClass(); goto lp0pW; omisn: $query = $query->result_object(); goto GfhkU; br0rY: $fields[$table] = (object) ["\x74\x61\x62\154\x65\137\156\141\155\x65" => $table, "\143\x6f\x6c\165\x6d\156\x73" => $retval]; goto nMgGr; E_kMd: vdxnw: goto br0rY; YKkEk: c9hj6: goto GfqbA; mMFbi: $i++; goto EwWkJ; lRJ_H: $retval[$i]->type = $query[$i]->data_type; goto w0n_X; Qg2sH: if (!(($query = $this->db->query($sql)) === FALSE)) { goto W7N0c; } goto B31JC; Sje5b: $c = count($query); goto YKkEk; h9jfh: $retval[$i]->extra = $query[$i]->extra; goto DZtQj; w0n_X: $retval[$i]->collation = $query[$i]->collation_name; goto ahneU; nMgGr: Ecgjw: goto rjpj0; DZtQj: $retval[$i]->nullable = $query[$i]->is_nullable; goto Fqwf8; dxn1W: W7N0c: goto omisn; bWH0c: $retval[$i]->comment = $query[$i]->column_comment; goto h9jfh; KQaqy: $sql = "\123\x45\x4c\105\x43\124\x20\140\143\x6f\154\165\x6d\x6e\x5f\156\x61\x6d\145\140\x2c\40\140\143\x6f\x6c\165\x6d\x6e\137\x74\x79\x70\145\x60\x2c\40\140\x63\157\x6c\154\x61\164\151\157\x6e\x5f\156\141\155\x65\140\x2c\x20\x60\x64\x61\x74\141\x5f\164\171\160\x65\140\x2c\x20\140\x63\150\x61\162\141\x63\164\145\162\x5f\x6d\x61\170\151\x6d\165\155\x5f\154\145\156\x67\164\x68\140\54\x20\x60\x6e\x75\x6d\x65\x72\x69\143\137\x70\162\x65\x63\151\163\151\157\156\140\x2c" . "\40\x60\143\157\x6c\x75\155\156\x5f\144\145\146\x61\x75\x6c\164\140\x2c\40\x60\x63\x6f\x6c\x75\x6d\156\137\153\x65\x79\140\x2c\40\x60\x63\x6f\154\x75\x6d\x6e\x5f\x63\157\155\155\145\x6e\x74\x60\x2c\x20\x60\145\170\164\162\141\x60\x2c\x20\140\x69\x73\137\x6e\x75\154\154\141\x62\154\145\140\15\xa\x9\x9\x9\106\x52\x4f\x4d\40\x60\151\x6e\x66\157\162\155\141\x74\151\157\x6e\137\x73\x63\x68\145\155\141\140\56\x60\143\157\x6c\165\x6d\x6e\163\140\40\127\110\x45\x52\x45\40\164\x61\142\x6c\x65\x5f\x73\x63\150\145\155\x61\x20\x3d\40\42" . $this->db->database . "\x22\40\x41\x4e\x44\40\x74\x61\142\154\x65\x5f\156\141\155\x65\40\75\x20\x22" . $table . "\x22"; goto Qg2sH; ahneU: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto tzMrM; Up1F3: $retval[$i]->col_type = $query[$i]->column_type; goto lRJ_H; GfhkU: $retval = array(); goto JpQhC; Fqwf8: $retval[$i]->primary = $query[$i]->column_key; goto rFVxH; EwWkJ: goto c9hj6; goto E_kMd; B31JC: $fields = FALSE; goto dxn1W; rjpj0: } goto b4VVI; GWHIS: $full_tables = array_unique($full_tables); goto DdwkH; y0yJX: $tbl_seharusnya = array_keys($json); goto ePol4; ePol4: $tbl_ada = array_keys($fields); goto XHGUq; ac5an: $this->db->db_debug = $db_debug; goto hKpSR; QmG4J: $script_create_table = []; goto kuWPv; kuWPv: $add_columns = []; goto Mkgk1; mZ_DV: $fields = []; goto W1D71; f_q0z: ZkCMp: goto ac5an; b4VVI: mG8yt: goto RAdXJ; wQRGR: $script_edit_column = []; goto FFZX2; hKpSR: $data = ["\x66\x69\145\x6c\x64\163" => $fields, "\143\162\x65\x61\x74\145\x5f\x74\141\x62\154\145\x73" => $create_tables, "\x63\157\165\x6e\164\137\x74\x62\x6c" => count($create_tables), "\x61\144\x64\137\x63\157\x6c\x75\x6d\x6e\163\137\x74\157\137\164\141\x62\154\x65" => $add_columns, "\x63\157\x75\x6e\x74\137\143\157\154" => count($add_columns), "\145\x64\x69\x74\137\143\x6f\x6c\165\x6d\x6e\163" => $edit_columns, "\143\x6f\x75\x6e\164\137\155\157\x64" => count($edit_columns), "\x61\x64\144\x5f\164\x62\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\x64\144\137\143\x6f\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\x6f\144\137\143\157\154" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto vL3Vp; XHGUq: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto GWHIS; Y1oRw: $tabless = $this->db->list_tables(); goto mZ_DV; RAdXJ: $json = file_get_contents("\x2e\x2f\x61\163\163\x65\x74\x73\x2f\x61\160\160\x2f\x64\142\x2f\144\x61\x74\141\x62\x61\x73\x65\x2e\x6a\163\157\156"); goto lDMIi; lDMIi: $json = json_decode($json); goto ov3mr; CA7MG: $db_debug = $this->db->db_debug; goto uVh10; Nln0v: $edit_columns = []; goto wQRGR; Mkgk1: $script_create_column = []; goto Nln0v; FFZX2: foreach ($full_tables as $table) { goto fNJ6q; LiNU3: foreach ($json[$table]->columns as $jtbl) { goto ZhCFj; vnF12: if ($jtbl->max_length == null) { goto pwHxB; } goto VY31C; mc6Rs: $length = "\50" . ($jtbl->max_length + 1) . "\x29"; goto dTAf9; AaY2i: wY47Y: goto p1ixg; dTAf9: ovvGY: goto DOeL_; XpMsr: $nullable = $jtbl->nullable == "\x4e\117" ? "\40\x4e\x4f\x54\x20\116\125\114\114" : ''; goto Sg61V; ZM356: goto ovvGY; goto vFYvV; mBdkn: $comment = $jtbl->comment == '' ? '' : "\x20\x43\x4f\x4d\115\x45\x4e\x54\40\47" . $jtbl->comment . "\47"; goto D8q0i; xT9Ei: $length = ''; goto yzaJI; mkt5u: lQ2q9: goto mBdkn; Ef9xx: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto vORf7; Sg61V: $default = $jtbl->default == null ? '' : "\x20\104\x45\x46\x41\125\x4c\124\40" . $jtbl->default; goto Ef9xx; GyjMR: goto uUeKp; goto sRKCR; ZhCFj: if ($this->db->field_exists($jtbl->name, $table)) { goto fMtd5; } goto fXJQL; ZkJEF: a8eZs: goto AaY2i; W3Eu4: $length = ''; goto GyjMR; vORf7: if (!(strtoupper($extra) == "\x20\101\x55\124\117\137\x49\116\x43\122\105\x4d\x45\x4e\124")) { goto lQ2q9; } goto nixjg; vFYvV: Dm_98: goto mc6Rs; DOeL_: uUeKp: goto XpMsr; yzaJI: goto uUeKp; goto wT2jC; fXJQL: $add_columns[$table][] = $jtbl; goto vnF12; sRKCR: pwHxB: goto xT9Ei; D6X0g: $length = "\x28" . $jtbl->max_length . "\x29"; goto ZM356; wT2jC: lTMqo: goto sZEuM; sZEuM: if ($jtbl->type == "\x69\156\164") { goto Dm_98; } goto D6X0g; VY31C: if ($jtbl->type != "\154\x6f\x6e\x67\164\145\170\164" && $jtbl->type != "\155\x65\x64\x69\165\155\x74\145\x78\164" && $jtbl->type != "\164\x65\170\164") { goto lTMqo; } goto W3Eu4; loVw7: foreach ($fields[$table]->columns as $ftbl) { goto nkbai; nwY3n: Ee6Ea: goto Mmb4D; i3QiQ: $ftbl->extra = str_replace("\50\51", '', $ftbl->extra); goto I0sq1; clE82: if (!($jtbl->comment != $ftbl->comment)) { goto xsU_p; } goto L0tDY; OS3rT: wI0Wr: goto clE82; kwjMA: goto Ee6Ea; goto MyHmr; wJUAG: F7QdG: goto SbAIT; ULtvp: if (!($jtbl->col_type != $ftbl->col_type)) { goto z1ySb; } goto hXje3; ZiVtc: if (!($jtbl->nullable != $ftbl->nullable)) { goto F7QdG; } goto JDr8b; m7LAY: xaCh7: goto Zry_x; APyAT: zOTd4: goto zzVAe; X66ce: WafAh: goto RYFip; t5O_m: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto FmJEk; } goto DoQeA; nkbai: if (!($jtbl->name == $ftbl->name)) { goto AtgN7; } goto ULtvp; nuKHy: $comment = $jtbl->comment == '' ? '' : "\x20\103\x4f\115\x4d\x45\x4e\x54\x20\47" . $jtbl->comment . "\47"; goto YE4Cp; PwyFZ: AtgN7: goto APyAT; VmaAg: array_push($modif_column, "\101\104\x44\x20\120\122\111\x4d\x41\x52\x59\x20\113\x45\131\x20\x28\x60" . $jtbl->name . "\x60\51"); goto CAzV9; ZMnvQ: T7HiY: goto rLmoj; Xu7G4: SOgfW: goto NGumP; zls2d: $edit_columns[$table][$jtbl->name]["\x70\x72\151\155\141\x72\171"] = $jtbl->primary; goto leBAQ; CBInW: if (strtolower($jtbl->primary) == "\165\156\x69") { goto SEQJs; } goto kwjMA; CAzV9: goto Ee6Ea; goto nkmmT; bdcwz: array_push($modif_column, "\101\x44\x44\40\x55\116\x49\x51\x55\x45\40\113\x45\131\x20\x60" . $jtbl->name . "\140\40\50\140" . $jtbl->name . "\140\51"); goto nwY3n; Mmb4D: Xolfr: goto t5O_m; DoQeA: $nullable = $jtbl->nullable == "\x4e\117" ? "\x20\x4e\x4f\x54\x20\x4e\125\x4c\114" : ''; goto zjl6e; L0tDY: $edit_columns[$table][$jtbl->name]["\x63\157\155\x6d\145\156\x74"] = $jtbl->comment; goto wQqhx; rLmoj: if (!($jtbl->extra != $ftbl->extra)) { goto wI0Wr; } goto talvu; yElOs: if (!($ftbl->extra != null)) { goto T7HiY; } goto i3QiQ; YE4Cp: array_push($modif_column, "\115\117\104\111\x46\131\x20\140" . $jtbl->name . "\140\40" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto xNw1r; v6p2N: l1qAa: goto yElOs; SLBLA: $jtbl->extra = strtoupper($jtbl->extra); goto v6p2N; DNunn: $jtbl->extra = str_replace("\50\x29", '', $jtbl->extra); goto SLBLA; HtXrI: $edit_columns[$table][$jtbl->name]["\x64\x65\146\141\165\154\x74"] = $jtbl->default; goto Xu7G4; K3zM6: z1ySb: goto ZiVtc; JDr8b: $edit_columns[$table][$jtbl->name]["\x6e\165\154\x6c\x61\142\x6c\145"] = $jtbl->nullable; goto wJUAG; talvu: $edit_columns[$table][$jtbl->name]["\145\x78\164\x72\x61"] = $jtbl->extra; goto OS3rT; qrZ3z: $jtbl->default = strtoupper($jtbl->default); goto m7LAY; Z5wTa: if (!($jtbl->primary != $ftbl->primary)) { goto Xolfr; } goto zls2d; leBAQ: if (strtolower($jtbl->primary) == "\x70\162\151") { goto Do1xh; } goto CBInW; NGumP: if (!($jtbl->extra != null)) { goto l1qAa; } goto DNunn; hXje3: $edit_columns[$table][$jtbl->name]["\143\157\x6c\137\164\x79\x70\x65"] = $jtbl->col_type; goto K3zM6; qD5y0: $ftbl->default = strtoupper($ftbl->default); goto X66ce; SbAIT: if (!($jtbl->default != null)) { goto xaCh7; } goto K8HQF; zjl6e: $default = $jtbl->default == null ? '' : "\x20\x44\x45\106\101\125\x4c\124\x20" . $jtbl->default; goto EIWzz; a3a3Y: $ftbl->default = str_replace("\x28\x29", '', $ftbl->default); goto qD5y0; I0sq1: $ftbl->extra = strtoupper($ftbl->extra); goto ZMnvQ; EIWzz: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto nuKHy; MyHmr: Do1xh: goto VmaAg; RYFip: if (!($jtbl->default != $ftbl->default)) { goto SOgfW; } goto HtXrI; Zry_x: if (!($ftbl->default != null)) { goto WafAh; } goto a3a3Y; xNw1r: FmJEk: goto PwyFZ; K8HQF: $jtbl->default = str_replace("\50\x29", '', $jtbl->default); goto qrZ3z; wQqhx: xsU_p: goto Z5wTa; nkmmT: SEQJs: goto bdcwz; zzVAe: } goto ZkJEF; nixjg: $extra .= "\40\x50\x52\111\x4d\101\122\x59\x20\113\105\x59"; goto mkt5u; D8q0i: array_push($add_column, "\101\104\104\40\x60" . $jtbl->name . "\140\x20" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto sPIAM; sPIAM: fMtd5: goto loVw7; p1ixg: } goto YzUQx; fNJ6q: if (!$this->db->table_exists($table)) { goto XVOzk; } goto nem3u; iJPUw: if (!(count($add_column) > 0)) { goto O2hpb; } goto aon86; R33dA: O2hpb: goto D4HVz; MuMNS: $script = "\x43\122\105\x41\x54\x45\40\124\x41\102\x4c\105\x20\x60" . $table . "\140\x20\x28"; goto BOvLA; nem3u: if (!isset($json[$table])) { goto Wyco6; } goto rrL9C; HITit: $create_tables[] = $json[$table]; goto MuMNS; By3sH: $script_create_table[$table] = $script; goto n60Rt; O_PtM: goto aSb4s; goto MmBBL; BOvLA: $pri = ''; goto njwK1; jcXwz: Wyco6: goto O_PtM; YzUQx: tSbTa: goto iJPUw; RkL7d: $script_edit_column[$table] = "\x41\x4c\x54\105\122\x20\124\101\x42\114\x45\x20\x60" . $table . "\x60\x20" . implode("\54\x20", $modif_column) . "\x3b"; goto BNOsP; MmBBL: XVOzk: goto HITit; aon86: $script_create_column[$table] = "\x41\x4c\x54\105\122\40\x54\101\x42\114\x45\40\140" . $table . "\140\x20" . implode("\x2c\40", $add_column) . "\x3b"; goto R33dA; D4HVz: if (!(count($modif_column) > 0)) { goto VT0E4; } goto RkL7d; tEPB2: Qepo_: goto T1x5_; iXYvS: $modif_column = []; goto LiNU3; njwK1: foreach ($json[$table]->columns as $column) { goto NFcEc; s16eu: $length = "\x28" . $column->max_length . "\51"; goto zeyIX; W06he: $length = "\50" . ($column->max_length + 1) . "\x29"; goto y67G0; yW0L9: $default = $column->default == null ? '' : "\x20\x44\x45\x46\101\125\x4c\x54\40" . $column->default; goto DLb7f; NFcEc: if ($column->max_length == null) { goto dsU2r; } goto ma5v8; MrgDW: cgec5: goto TsE5S; dQ0sW: NmY9G: goto W06he; yOnY_: goto mbXYw; goto aJRKd; Ssj51: if ($column->type == "\x69\x6e\164") { goto NmY9G; } goto s16eu; mqV3V: mbXYw: goto csqgL; kXgcD: $length = ''; goto kyXk8; ouA9_: $pri .= $column->primary != '' ? "\120\x52\111\115\101\x52\131\40\x4b\x45\131\40\x28\x60" . $column->name . "\140\51" : ''; goto MrgDW; y67G0: X_Vux: goto mqV3V; JNKN8: dsU2r: goto zz3aP; kyXk8: goto mbXYw; goto JNKN8; zeyIX: goto X_Vux; goto dQ0sW; zz3aP: $length = ''; goto yOnY_; ma5v8: if ($column->type != "\x6c\157\156\x67\164\x65\x78\x74" && $column->type != "\155\145\x64\151\165\155\x74\x65\170\164" && $column->type != "\164\145\170\x74") { goto xUN3q; } goto kXgcD; aJRKd: xUN3q: goto Ssj51; nWd21: $script .= "\140" . $column->name . "\140\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto ouA9_; DLb7f: $extra = $column->extra == '' ? '' : "\40" . strtoupper($column->extra); goto Woq93; csqgL: $nullable = $column->nullable == "\116\x4f" ? "\x20\x4e\x4f\124\40\116\x55\x4c\x4c" : ''; goto yW0L9; Woq93: $comment = $column->comment == '' ? '' : "\40\x43\x4f\x4d\x4d\105\116\124\40\47" . $column->comment . "\x27"; goto nWd21; TsE5S: } goto tEPB2; BNOsP: VT0E4: goto jcXwz; PRgpW: lhGVN: goto z5WTx; n60Rt: aSb4s: goto PRgpW; T1x5_: $script .= $pri . "\x29\40\105\x4e\107\111\116\x45\75\111\x6e\156\157\104\102\40\104\x45\106\x41\x55\x4c\x54\x20\x43\110\101\122\x53\x45\x54\75\x75\x74\x66\x38\155\x62\64\x3b"; goto By3sH; rrL9C: $add_column = []; goto iXYvS; z5WTx: } goto f_q0z; uVh10: $this->db->db_debug = FALSE; goto Y1oRw; FnyAl: } public function createTable() { goto zbEFT; cdGvE: $scripts = json_decode($this->encryption->decrypt($scripts)); goto HoGK1; UZbDi: sleep(1); goto cdGvE; qDySe: $data["\155\145\x73\x73\x61\147\145"] = "\125\x70\144\x61\x74\145\40\153\157\x6c\x6f\x6d"; goto Hb5zG; HoGK1: $queries = ''; goto Gij_A; yLHdo: WBiGW: goto G7gEY; Gij_A: foreach ($scripts as $script) { $queries .= $script; FVY9J: } goto yLHdo; Z7z5L: str_replace("\x25\x32\x42", "\x2b", $scripts); goto UZbDi; zbEFT: $scripts = $this->input->post("\x64\141\x74\x61", true); goto Z7z5L; Hb5zG: $this->output_json($data); goto l9Ydg; G7gEY: $data["\163\x75\x63\143\x65\x73\x73"] = $this->runQuery($queries); goto qDySe; l9Ydg: } public function createColumn() { goto qB12d; DjkZp: $this->output_json($data); goto BxR1n; vqjq1: $data["\x6d\145\163\x73\x61\x67\x65"] = "\115\x6f\x64\x69\146\x79\x20\153\157\x6c\x6f\x6d"; goto DjkZp; O1yWp: if (!(strpos("\x60\165\151\x64\x60", $queries) !== false)) { goto BSvdN; } goto ZOG_v; ZOG_v: $this->updateUID(); goto on0dL; qB12d: $scripts = $this->input->post("\x64\x61\x74\141", true); goto p5KP0; WqT5G: AO4Is: goto O1yWp; p5KP0: str_replace("\x25\62\x42", "\x2b", $scripts); goto OSKSM; zQPBz: $queries = ''; goto fV8UD; on0dL: BSvdN: goto tLp8I; fV8UD: foreach ($scripts as $script) { $queries .= $script; KDsJ1: } goto WqT5G; tLp8I: $data["\163\165\143\x63\x65\163\x73"] = $this->runQuery($queries); goto vqjq1; vcKa_: $scripts = json_decode($this->encryption->decrypt($scripts)); goto zQPBz; OSKSM: sleep(1); goto vcKa_; BxR1n: } public function editColumn() { goto LV4xO; AzJ9I: ARqik: goto gHvoC; TR698: $this->output_json($data); goto HAIL4; WZgUr: sleep(1); goto G6tu4; HrRFm: foreach ($scripts as $script) { $queries .= $script; rclBv: } goto AzJ9I; G6tu4: $scripts = json_decode($this->encryption->decrypt($scripts)); goto ulGap; vzV9i: $data["\155\x65\x73\x73\x61\x67\x65"] = "\125\160\144\141\x74\x65\x20\x73\145\x6c\145\x73\x61\151"; goto TR698; hR18Q: str_replace("\x25\62\102", "\53", $scripts); goto WZgUr; ulGap: $queries = ''; goto HrRFm; LV4xO: $scripts = $this->input->post("\144\x61\x74\x61", true); goto hR18Q; gHvoC: $data["\x73\165\143\143\145\x73\x73"] = $this->runQuery($queries); goto vzV9i; HAIL4: } function runQuery($script) { goto e6q5x; TNaCW: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto BcxE4; EEUW6: mrPeV: goto HmBrt; wYBse: return true; goto UidAp; nbDkA: $hostuser = $this->db->username; goto CJTbs; GwFvX: $mysqli->close(); goto wYBse; BcxE4: if (!mysqli_connect_errno()) { goto mrPeV; } goto wLlnG; e6q5x: $hostname = $this->db->hostname; goto nbDkA; HmBrt: $mysqli->multi_query($script); goto GwFvX; wLlnG: return mysqli_connect_errno(); goto EEUW6; dGqqy: $database = $this->db->database; goto TNaCW; CJTbs: $hostpass = $this->db->password; goto dGqqy; UidAp: } function updateUID() { goto WxcLx; tsRxS: $input = array(); goto XKieh; AwFaO: oq4EA: goto njzii; njzii: return $this->db->update_batch("\155\141\163\x74\x65\x72\x5f\x73\x69\163\167\141", $input, "\x69\144\137\x73\x69\163\167\x61"); goto wfaMD; RbteG: $siswas = $this->db->get("\x6d\x61\x73\x74\145\162\x5f\163\x69\x73\167\141")->result(); goto tsRxS; WxcLx: $this->load->library("\x55\165\x69\x64", "\x75\165\151\x64"); goto RbteG; XKieh: foreach ($siswas as $siswa) { $input[] = array("\x69\144\137\x73\x69\x73\x77\141" => $siswa->id_siswa, "\x75\x69\x64" => $this->uuid->v4()); umbP8: } goto AwFaO; wfaMD: } function make_base() { } }
